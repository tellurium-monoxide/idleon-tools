---
---
<script>
  const SALT_ICONS = {
    "Redox_Salts": "{{ site.baseurl }}/assets/images/refinery/36px-Redox_Salts.png",
    "Explosive_Salts": "{{site.baseurl}}/assets/images/refinery/36px-Explosive_Salts.png",
    "Spontaneity_Salts": "{{site.baseurl}}/assets/images/refinery/36px-Spontaneity_Salts.png",
    "Dioxide_Salts": "{{site.baseurl}}/assets/images/refinery/36px-Dioxide_Synthesis.png",
    "Purple_Salts": "{{site.baseurl}}/assets/images/refinery/36px-Purple_Salt.png",
    "Nullo_Salts": "{{site.baseurl}}/assets/images/refinery/36px-Nullo_Salt.png",
  }


  const GET_MEAL_ICON = (id) => {
    return `{{site.baseurl}}/assets/images/meals/${id}.png`
  }

  const GET_STAMP_ICON = (name) => {
    return `{{site.baseurl}}/assets/images/stamps/${name}.png`
  }

  const BEGINNER_CLASSES = [
    "Rage_Basics",
    "Calm_Basics",
    "Savvy_Basics",
    "Beginner",
  ]
  const GET_CLASS_ICON = (name) => {
    if (BEGINNER_CLASSES.includes(name)) {
      return "{{site.baseurl}}/assets/images/game/classes/Beginner_Class_Icon.png"
    }
    return `{{site.baseurl}}/assets/images/game/classes/${name}_Class_Icon.png`
  }


  // Preload usefull idleon images
  // from https://stackoverflow.com/questions/10240110/how-do-you-cache-an-image-in-javascript
  function preloadImages(array, waitForOtherResources, timeout) {
    var loaded = false, list = preloadImages.list, imgs = array.slice(0), t = timeout || 15 * 1000, timer;
    if (!preloadImages.list) {
      list = []
      preloadImages.list = list;
    }
    if (!waitForOtherResources || document.readyState === 'complete') {
      loadNow();
    } else {
      window.addEventListener("load", function () {
        clearTimeout(timer);
        loadNow();
      });
      // in case window.addEventListener doesn't get called (sometimes some resource gets stuck)
      // then preload the images anyway after some timeout time
      timer = setTimeout(loadNow, t);
    }

    function loadNow() {
      if (!loaded) {
        loaded = true;
        for (var i = 0; i < imgs.length; i++) {
          var img = new Image();
          img.onload = img.onerror = img.onabort = function () {
            var index = list.indexOf(this);
            if (index !== -1) {
              // remove image from the array once it's loaded
              // for memory consumption reasons
              list.splice(index, 1);
            }
          }
          list.push(img);
          img.src = imgs[i];
        }
      }
    }
  }

  preloadImages([
    "{{site.baseurl}}/assets/images/game/world-banners/Wb1.png",
    "{{site.baseurl}}/assets/images/game/world-banners/Wb2.png",
    "{{site.baseurl}}/assets/images/game/world-banners/Wb3.png",
    "{{site.baseurl}}/assets/images/game/world-banners/Wb4.png",
    "{{site.baseurl}}/assets/images/game/world-banners/Wb5.png",
    "{{site.baseurl}}/assets/images/game/world-banners/Wb6.png",
  ], true);
</script>